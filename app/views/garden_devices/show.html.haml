%h1= @garden_device.name
%h2 Schedules
- if @garden_device.device_schedules.length > 0
  %table
    %tr
      %th Schedule Type
      %th Frequency
      %th Delete
    - @garden_device.device_schedules.each do |schedule|
      %tr
        %td= ScheduleTypeLookup.find_by_flag(schedule.sensor_flag).name
        %td= "Every " + pluralize(schedule.frequency, "minute")
        %td= link_to 'Delete', {:controller => :device_schedules, :action => :destroy, :id => schedule.id}, :confirm=> "Delete this schedule?", :method => :delete
%h3 Add Schedule
= form_for(@device_schedule) do |f|
  = hidden_field_tag 'garden_device_id', @garden_device.id
  %table
    %tr
      %td= f.label :sensor_flag, "Schedule Type"
      %td= f.select :sensor_flag, ScheduleTypeLookup.all.collect {|s| [s.name, s.flag]}
    %tr
      %td= f.label :frequency, "Frequency (in minutes)"
      %td= f.text_field :frequency
    %tr
      %td
      %td= f.submit "Add Schedule"
= google_chart('temperature_graph', 300, { :device_id => @garden_device.id })
= google_chart('humidity_graph', 300, { :device_id => @garden_device.id })
= google_chart('light_graph', 300, { :device_id => @garden_device.id })